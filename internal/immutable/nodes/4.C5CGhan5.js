import{f as d,a as o,c as le}from"../chunks/BUB_SVW2.js";import{p as ne,c as ie,g as e,s as f,t as v,d as oe,f as U,h as c,i as n,j as i,k as l,l as ce}from"../chunks/CYChEm4a.js";import{s as h}from"../chunks/DwYNeIeS.js";import{i as g}from"../chunks/DOcNpZnL.js";import{s as j,e as de,i as ue}from"../chunks/mok4srEe.js";import{p as _}from"../chunks/D1MDFpyv.js";var pe=d('<div class="badge preset-filled-surface"> </div>'),me=d('<div class="placeholder animate-pulse h-10 w-full rounded-token"></div>'),fe=d('<a target="_blank" rel="noopener noreferrer" class="btn preset-tonal"> </a>'),ve=d('<div class="grid grid-cols-2 gap-2 w-full"></div>'),he=d('<a target="_blank" rel="noopener noreferrer" class="btn preset-tonal w-full">View on MusicBrainz</a>'),ge=d('<div class="text-xs opacity-50 font-mono mt-2 break-all"> </div>'),_e=d('<div class="relative min-h-screen w-full flex items-center justify-center overflow-hidden bg-surface-900"><div class="absolute w-150 h-150 bg-primary-500/20 blur-[120px] rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div> <div class="absolute inset-0 pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%)] bg-size-[100%_4px] z-10"></div> <div class="container mx-auto p-4 flex flex-col items-center justify-center relative z-20"><div class="card p-8 w-full max-w-2xl bg-surface-100-800-token shadow-xl space-y-6 text-center border border-surface-200-700-token rounded-container-token backdrop-blur-sm bg-opacity-90 dark:bg-opacity-90"><h1 class="h3 font-bold uppercase tracking-widest opacity-60">Shared Track</h1> <div class="space-y-2"><h2 class="h1 font-bold text-primary-500"> </h2> <p class="h3 text-surface-600-300-token"> </p></div> <!> <div class="flex flex-col gap-3 w-full pt-4"><a class="btn preset-filled-primary-500 font-bold w-full shadow-lg shadow-primary-500/20">Open in Synara</a> <!> <!></div> <!></div></div></div>');function Pe(q,O){ne(O,!0);let D=i(()=>_.url.searchParams.get("title")??"Unknown Title"),y=i(()=>_.url.searchParams.getAll("artist")),Y=i(()=>_.url.searchParams.get("duration")),b=i(()=>_.url.searchParams.get("mbid")),u=U(null),w=U(null),k=U(!1);ie(()=>{const a=[e(D),...e(y)].join(" ");if(a.trim()){f(k,!0);const r="https://corsproxy.io/?url=",s=`https://itunes.apple.com/search?term=${encodeURIComponent(a)}&entity=song&limit=1`;fetch(s).then(t=>t.json()).then(t=>{if(t.results&&t.results.length>0){f(u,t.results[0],!0);const p=e(u).trackViewUrl,m=`https://api.song.link/v1-alpha.1/links?url=${encodeURIComponent(p)}`;return fetch(r+m)}else return console.warn("Track not found on iTunes"),null}).then(t=>t?t.json():null).then(t=>{f(w,t,!0),f(k,!1)}).catch(t=>{console.error("Failed to fetch streaming links",t),f(k,!1)})}});let E=i(()=>e(u)?.trackName??e(D)),G=i(()=>e(u)?.artistName??(e(y).length>0?e(y).join(", "):"Unknown Artist"));function A(a){const r=Math.floor(a/6e4),s=(a%6e4/1e3).toFixed(0);return r+":"+(Number(s)<10?"0":"")+s}let B=i(()=>e(u)?.trackTimeMillis?A(e(u).trackTimeMillis):A(Number(e(Y))??0)),N=i(()=>e(w)?.linksByPlatform?[{id:"spotify",name:"Spotify"},{id:"appleMusic",name:"Apple Music"},{id:"youtubeMusic",name:"YouTube Music"},{id:"soundcloud",name:"SoundCloud"},{id:"deezer",name:"Deezer"},{id:"tidal",name:"Tidal"},{id:"bandcamp",name:"Bandcamp"},{id:"napster",name:"Napster"},{id:"amazonMusic",name:"Amazon Music"}].map(r=>{const s=e(w).linksByPlatform[r.id];return s?{name:r.name,url:s.url}:null}).filter(r=>r!==null):[]),H=i(()=>`synara://share${_.url.search}`),S=i(()=>e(b)?`https://musicbrainz.org/recording/${e(b)}`:null);var M=_e(),$=c(n(M),4),C=n($),P=c(n(C),2),z=n(P),J=n(z,!0);l(z);var I=c(z,2),K=n(I,!0);l(I),l(P);var F=c(P,2);{var Q=a=>{var r=pe(),s=n(r);l(r),v(()=>h(s,`Duration: ${e(B)??""}`)),o(a,r)};g(F,a=>{e(B)&&a(Q)})}var T=c(F,2),L=n(T),R=c(L,2);{var W=a=>{var r=me();o(a,r)},X=a=>{var r=le(),s=ce(r);{var t=p=>{var m=ve();de(m,21,()=>e(N),ue,(te,V)=>{var x=fe(),se=n(x,!0);l(x),v(()=>{j(x,"href",e(V).url),h(se,e(V).name)}),o(te,x)}),l(m),o(p,m)};g(s,p=>{e(N).length>0&&p(t)},!0)}o(a,r)};g(R,a=>{e(k)?a(W):a(X,!1)})}var Z=c(R,2);{var ee=a=>{var r=he();v(()=>j(r,"href",e(S))),o(a,r)};g(Z,a=>{e(S)&&a(ee)})}l(T);var ae=c(T,2);{var re=a=>{var r=ge(),s=n(r);l(r),v(()=>h(s,`MBID: ${e(b)??""}`)),o(a,r)};g(ae,a=>{e(b)&&a(re)})}l(C),l($),l(M),v(()=>{h(J,e(E)),h(K,e(G)),j(L,"href",e(H))}),o(q,M),oe()}export{Pe as component};
