import{f as d,a as u,c as oe}from"../chunks/BUB_SVW2.js";import{p as ue,c as ce,g as e,s as b,t as g,d as de,f as D,h as c,i as s,j as i,k as n,l as me}from"../chunks/CYChEm4a.js";import{s as f}from"../chunks/DwYNeIeS.js";import{i as _}from"../chunks/DOcNpZnL.js";import{s as A,e as pe,i as fe}from"../chunks/mok4srEe.js";import{p as v}from"../chunks/BnZauD1f.js";var ve=d('<div class="badge preset-filled-surface"> </div>'),he=d('<div class="placeholder animate-pulse h-10 w-full rounded-token"></div>'),be=d('<a target="_blank" rel="noopener noreferrer" class="btn preset-tonal"> </a>'),ge=d('<div class="grid grid-cols-2 gap-2 w-full"></div>'),_e=d('<a target="_blank" rel="noopener noreferrer" class="btn preset-tonal w-full">View on MusicBrainz</a>'),ke=d('<div class="text-xs opacity-50 font-mono mt-2 break-all"> </div>'),ye=d('<div class="relative min-h-screen w-full flex items-center justify-center overflow-hidden bg-surface-900"><div class="absolute w-150 h-150 bg-primary-500/20 blur-[120px] rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div> <div class="absolute inset-0 pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%)] bg-size-[100%_4px] z-10"></div> <div class="container mx-auto p-4 flex flex-col items-center justify-center relative z-20"><div class="card p-8 w-full max-w-2xl bg-surface-100-800-token shadow-xl space-y-6 text-center border border-surface-200-700-token rounded-container-token backdrop-blur-sm bg-opacity-90 dark:bg-opacity-90"><h1 class="h3 font-bold uppercase tracking-widest opacity-60"> </h1> <div class="space-y-2"><h2 class="h1 font-bold text-primary-500"> </h2> <p class="h3 text-surface-600-300-token"> </p></div> <!> <div class="flex flex-col gap-3 w-full pt-4"><a class="btn preset-filled-primary-500 font-bold w-full shadow-lg shadow-primary-500/20">Open in Synara</a> <!> <!></div> <!></div></div></div>');function Te(G,H){ue(H,!0);let m=i(()=>v.url.searchParams.get("type")??"song"),I=i(()=>v.url.searchParams.get("title")??"Unknown Title"),w=i(()=>v.url.searchParams.getAll("artist")),N=i(()=>v.url.searchParams.get("duration")),k=i(()=>v.url.searchParams.get("mbid")),o=D(null),U=D(null),y=D(!1);ce(()=>{const a=[e(I),...e(w)].join(" ");if(a.trim()){b(y,!0);const t=e(m)==="album"?"album":"song",l=`https://itunes.apple.com/search?term=${encodeURIComponent(a)}&entity=${t}&limit=1`;fetch(l).then(r=>r.json()).then(r=>{if(r.results&&r.results.length>0){b(o,r.results[0],!0);const p=e(m)==="album"?e(o).collectionViewUrl:e(o).trackViewUrl;if(!p)return console.warn("Item URL not found in iTunes data"),null;const h=`https://api.song.link/v1-alpha.1/links?url=${encodeURIComponent(p)}`,j=`https://api.allorigins.win/raw?url=${encodeURIComponent(h)}`;return fetch(j)}else return console.warn("Item not found on iTunes"),null}).then(r=>r?r.json():null).then(r=>{b(U,r,!0),b(y,!1)}).catch(r=>{console.error("Failed to fetch streaming links",r),b(y,!1)})}});let J=i(()=>(e(m)==="album"?e(o)?.collectionName:e(o)?.trackName)??e(I)),K=i(()=>e(o)?.artistName??(e(w).length>0?e(w).join(", "):"Unknown Artist"));function B(a){const t=Math.floor(a/6e4),l=(a%6e4/1e3).toFixed(0);return t+":"+(Number(l)<10?"0":"")+l}let S=i(()=>e(m)==="song"?e(o)?.trackTimeMillis?B(e(o).trackTimeMillis):e(N)?B(Number(e(N))):null:null),C=i(()=>e(U)?.linksByPlatform?[{id:"spotify",name:"Spotify"},{id:"appleMusic",name:"Apple Music"},{id:"youtubeMusic",name:"YouTube Music"},{id:"soundcloud",name:"SoundCloud"},{id:"deezer",name:"Deezer"},{id:"tidal",name:"Tidal"},{id:"bandcamp",name:"Bandcamp"},{id:"napster",name:"Napster"},{id:"amazonMusic",name:"Amazon Music"}].map(t=>{const l=e(U).linksByPlatform[t.id];return l?{name:t.name,url:l.url}:null}).filter(t=>t!==null):[]),Q=i(()=>`synara://share${v.url.search}`),R=i(()=>e(k)?`https://musicbrainz.org/${e(m)==="album"?"release":"recording"}/${e(k)}`:null);var M=ye(),L=c(s(M),4),V=s(L),P=s(V),W=s(P);n(P);var z=c(P,2),T=s(z),X=s(T,!0);n(T);var F=c(T,2),Z=s(F,!0);n(F),n(z);var q=c(z,2);{var ee=a=>{var t=ve(),l=s(t);n(t),g(()=>f(l,`Duration: ${e(S)??""}`)),u(a,t)};_(q,a=>{e(S)&&a(ee)})}var $=c(q,2),O=s($),Y=c(O,2);{var ae=a=>{var t=he();u(a,t)},te=a=>{var t=oe(),l=me(t);{var r=p=>{var h=ge();pe(h,21,()=>e(C),fe,(j,E)=>{var x=be(),ie=s(x,!0);n(x),g(()=>{A(x,"href",e(E).url),f(ie,e(E).name)}),u(j,x)}),n(h),u(p,h)};_(l,p=>{e(C).length>0&&p(r)},!0)}u(a,t)};_(Y,a=>{e(y)?a(ae):a(te,!1)})}var re=c(Y,2);{var le=a=>{var t=_e();g(()=>A(t,"href",e(R))),u(a,t)};_(re,a=>{e(R)&&a(le)})}n($);var ne=c($,2);{var se=a=>{var t=ke(),l=s(t);n(t),g(()=>f(l,`MBID: ${e(k)??""}`)),u(a,t)};_(ne,a=>{e(k)&&a(se)})}n(V),n(L),n(M),g(()=>{f(W,`Shared ${e(m)==="album"?"Album":"Song"}`),f(X,e(J)),f(Z,e(K)),A(O,"href",e(Q))}),u(G,M),de()}export{Te as component};
