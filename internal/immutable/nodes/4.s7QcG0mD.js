import{f as p,a as u,c as de}from"../chunks/Cpa3O8I2.js";import{p as me,c as pe,g as e,s as b,t as f,d as fe,f as d,h as o,i as n,j as D,k as s,l as ve}from"../chunks/YNbwddvI.js";import{s as v}from"../chunks/CIF71o2f.js";import{i as h}from"../chunks/BvcJmJfZ.js";import{s as w,e as he,i as ge}from"../chunks/BPN8rsjB.js";import{p as g}from"../chunks/CwRgLWVk.js";var be=p('<img alt="Album Art" class="w-48 h-48 mx-auto rounded-lg shadow-2xl"/>'),_e=p('<div class="badge preset-filled-surface"> </div>'),ke=p('<div class="placeholder animate-pulse h-10 w-full rounded-token"></div>'),xe=p('<a target="_blank" rel="noopener noreferrer" class="btn preset-tonal"> </a>'),ye=p('<div class="grid grid-cols-2 gap-2 w-full"></div>'),we=p('<a target="_blank" rel="noopener noreferrer" class="btn preset-tonal w-full">View on MusicBrainz</a>'),Ue=p('<div class="text-xs opacity-50 font-mono mt-2 break-all"> </div>'),Ae=p('<div class="relative min-h-screen w-full flex items-center justify-center overflow-hidden bg-surface-900"><div class="absolute w-150 h-150 bg-primary-500/20 blur-[120px] rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div> <div class="absolute inset-0 pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%)] bg-size-[100%_4px] z-10"></div> <div class="container mx-auto p-4 flex flex-col items-center justify-center relative z-20"><div class="card p-8 w-full max-w-2xl bg-surface-100-800-token shadow-xl space-y-6 text-center border border-surface-200-700-token rounded-container-token backdrop-blur-sm bg-opacity-90 dark:bg-opacity-90"><h1 class="h3 font-bold uppercase tracking-widest opacity-60"> </h1> <!> <div class="space-y-2"><h2 class="h1 font-bold text-primary-500"> </h2> <p class="h3 text-surface-600-300-token"> </p></div> <!> <div class="flex flex-col gap-3 w-full pt-4"><a class="btn preset-filled-primary-500 font-bold w-full shadow-lg shadow-primary-500/20">Open in Synara</a> <!> <!></div> <!></div></div></div>');function je(H,J){me(J,!0);let m=n(()=>g.url.searchParams.get("type")??"song"),I=n(()=>g.url.searchParams.get("title")??"Unknown Title"),U=n(()=>g.url.searchParams.getAll("artist")),B=n(()=>g.url.searchParams.get("duration")),_=n(()=>g.url.searchParams.get("mbid")),i=D(null),A=D(null),k=D(!1);pe(()=>{const a=[e(I),...e(U)].join(" ");if(a.trim()){b(k,!0);const r=encodeURIComponent(a).replace(/%20/g,"+"),l=t=>fetch(`https://itunes.apple.com/search?term=${r}&entity=${t}&limit=1`).then(c=>c.json()),$=e(m)==="album"?"album":"song";l($).then(t=>t.results&&t.results.length>0?t.results[0]:e(m)==="album"?(console.log("Album search failed, falling back to song search"),l("song").then(c=>c.results?.[0]??null)):null).then(t=>{if(t){b(i,t,!0);const c=e(m)==="album"?e(i).collectionViewUrl:e(i).trackViewUrl;if(!c)return console.warn("Item URL not found in iTunes data"),null;const j=`https://api.song.link/v1-alpha.1/links?url=${encodeURIComponent(c.split("?")[0])}`,x=`https://api.allorigins.win/raw?url=${encodeURIComponent(j)}`;return fetch(x)}else return console.warn("Item not found on iTunes"),null}).then(t=>t?t.json():null).then(t=>{b(A,t,!0),b(k,!1)}).catch(t=>{console.error("Failed to fetch streaming links",t),b(k,!1)})}});let K=n(()=>(e(m)==="album"?e(i)?.collectionName:e(i)?.trackName)??e(I)),W=n(()=>e(m)==="album"&&e(i)?.collectionArtistName?e(i).collectionArtistName:e(i)?.artistName??(e(U).length>0?e(U).join(", "):"Unknown Artist")),C=n(()=>e(i)?.artworkUrl100?.replace("100x100","600x600"));function S(a){const r=Math.floor(a/6e4),l=(a%6e4/1e3).toFixed(0);return r+":"+(Number(l)<10?"0":"")+l}let R=n(()=>e(m)==="song"?e(i)?.trackTimeMillis?S(e(i).trackTimeMillis):e(B)?S(Number(e(B))):null:null),L=n(()=>e(A)?.linksByPlatform?[{id:"spotify",name:"Spotify"},{id:"appleMusic",name:"Apple Music"},{id:"youtubeMusic",name:"YouTube Music"},{id:"soundcloud",name:"SoundCloud"},{id:"deezer",name:"Deezer"},{id:"tidal",name:"Tidal"},{id:"bandcamp",name:"Bandcamp"},{id:"napster",name:"Napster"},{id:"amazonMusic",name:"Amazon Music"}].map(r=>{const l=e(A).linksByPlatform[r.id];return l?{name:r.name,url:l.url}:null}).filter(r=>r!==null):[]),X=n(()=>`synara://share${g.url.search}`),V=n(()=>e(_)?`https://musicbrainz.org/${e(m)==="album"?"release":"recording"}/${e(_)}`:null);var M=Ae(),F=d(o(M),4),q=o(F),P=o(q),Z=o(P);s(P);var E=d(P,2);{var ee=a=>{var r=be();f(()=>w(r,"src",e(C))),u(a,r)};h(E,a=>{e(C)&&a(ee)})}var z=d(E,2),N=o(z),ae=o(N,!0);s(N);var O=d(N,2),re=o(O,!0);s(O),s(z);var Q=d(z,2);{var te=a=>{var r=_e(),l=o(r);s(r),f(()=>v(l,`Duration: ${e(R)??""}`)),u(a,r)};h(Q,a=>{e(R)&&a(te)})}var T=d(Q,2),Y=o(T),G=d(Y,2);{var le=a=>{var r=ke();u(a,r)},ne=a=>{var r=de(),l=ve(r);{var $=t=>{var c=ye();he(c,21,()=>e(L),ge,(j,x)=>{var y=xe(),ue=o(y,!0);s(y),f(()=>{w(y,"href",e(x).url),v(ue,e(x).name)}),u(j,y)}),s(c),u(t,c)};h(l,t=>{e(L).length>0&&t($)},!0)}u(a,r)};h(G,a=>{e(k)?a(le):a(ne,!1)})}var se=d(G,2);{var ie=a=>{var r=we();f(()=>w(r,"href",e(V))),u(a,r)};h(se,a=>{e(V)&&a(ie)})}s(T);var oe=d(T,2);{var ce=a=>{var r=Ue(),l=o(r);s(r),f(()=>v(l,`MBID: ${e(_)??""}`)),u(a,r)};h(oe,a=>{e(_)&&a(ce)})}s(q),s(F),s(M),f(()=>{v(Z,`Shared ${e(m)==="album"?"Album":"Song"}`),v(ae,e(K)),v(re,e(W)),w(Y,"href",e(X))}),u(H,M),fe()}export{je as component};
